 

local PromptController = require(game:GetService("ReplicatedStorage").Controllers.PromptController)

-- Simpan function asli
getgenv().oldFirePrompt = getgenv().oldFirePrompt or PromptController.FirePrompt

getgenv().Tabs.PlayerSetTab:CreateToggle({
    Name = "Auto Accept Prompt Trade",
    CurrentValue = false,
    Flag = "AutoAcceptPromptTrade",
    Callback = function(value)
        if value then
            PromptController.FirePrompt = function(self, promptText, ...)
                local text = tostring(promptText or "")
               

                if text:find("Accept") or text:find("from:") or text:find("to give") then
                  
                    -- langsung return hasil true tanpa tampilkan prompt
                    return require(game:GetService("ReplicatedStorage").Packages.Promise).resolve(true)
                end

                -- selain itu, biarkan normal
                return getgenv().oldFirePrompt(self, promptText, ...)
            end
        else
            -- Restore ke normal
            PromptController.FirePrompt = getgenv().oldFirePrompt
            
        end
    end
})


-- Hook metamethod global
getgenv().oldAFKScript = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
    local method = getnamecallmethod()

    if method == "FireServer" and tostring(self) == "ReconnectPlayer" then 
        return nil  
    end

    return getgenv().oldAFKScript(self, ...)
end))